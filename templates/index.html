<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>DWDM – ITU-T G.694.1</title>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background-color: #f4f6f8;
        }

        header {
            display: flex;
            align-items: center;
            gap: 20px;
            border-bottom: 3px solid #003366;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }

        header img {
            height: 80px;
        }

        h1, h2 {
            color: #003366;
        }

        table {
            border-collapse: collapse;
            width: 100%;
            background: white;
            margin-top: 15px;
        }

        th, td {
            border: 1px solid #999;
            padding: 6px;
            text-align: center;
        }

        th {
            background-color: #003366;
            color: white;
        }

        button {
            background-color: #003366;
            color: white;
            padding: 8px 14px;
            border: none;
            cursor: pointer;
            margin-top: 10px;
        }

        .contenido {
            display: none;
            margin-bottom: 40px;
        }
    </style>

    <script>
        function toggle(id) {
            const div = document.getElementById(id);
            div.style.display = div.style.display === "none" ? "block" : "none";
        }
    </script>
</head>

<body>

<header>
    <img src="{{ url_for('static', filename='logo_epn.png') }}">
    <div>
        <h2>Escuela Politécnica Nacional</h2>
        <p><b>Asignatura:</b> Redes Ópticas</p>
        <p><b>Integrantes:</b> Gabriel Palma, Micaela Ortiz</p>
        <p><b>Semestre:</b> 2025-B</p>
    </div>
</header>

<h1>Rejilla DWDM – ITU-T G.694.1</h1>

<p>
El índice <b>n</b> es común para toda la rejilla ITU-T.  
Cada espaciamiento selecciona subconjuntos de <b>n</b> (pares, múltiplos de 4, 8, etc.).
</p>

{% for nombre, filas in tablas.items() %}
<h2>Espaciamiento {{ nombre }}</h2>

<button onclick="toggle('bloque{{ loop.index }}')">
    Mostrar / Ocultar tabla y gráfico
</button>

<div class="contenido" id="bloque{{ loop.index }}">

<table>
    <tr>
        <th>n</th>
        <th>Frecuencia (THz)</th>
        <th>λ aproximada (nm)</th>
    </tr>
    {% for fila in filas %}
    <tr>
        <td>{{ fila.n }}</td>
        <td>{{ fila.f }}</td>
        <td>{{ fila.lambda }}</td>
    </tr>
    {% endfor %}
</table>

<canvas id="grafico{{ loop.index }}" height="100"></canvas>

<script>
const ctx{{ loop.index }} = document.getElementById("grafico{{ loop.index }}");
new Chart(ctx{{ loop.index }}, {
    type: 'scatter',
    data: {
        datasets: [{
            label: 'Frecuencia vs n',
            data: [
                {% for fila in filas %}
                {x: {{ fila.n }}, y: {{ fila.f }}},
                {% endfor %}
            ],
            backgroundColor: '#003366'
        }]
    },
    options: {
        scales: {
            x: { title: { display: true, text: 'Índice n' } },
            y: { title: { display: true, text: 'Frecuencia (THz)' } }
        }
    }
});
</script>

</div>
{% endfor %}

<p>
<b>Nota:</b> Las longitudes de onda son aproximadas.  
La especificación DWDM se define respecto a la frecuencia central.
</p>

</body>
</html>
